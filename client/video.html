<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>enroll Step 1 </title>
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="./static/css/all.css">
    <!-- Bootstrap core CSS -->
    <link type="text/css" href="./static/css/bootstrap.min.css" rel="stylesheet">

    <link type="text/css" href="./static/css/mdb.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/05313ba298.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link type="text/css" href="./static/css/style.css" rel="stylesheet">

    <style>
        html,
        body,
        header,
        .intro-2 {
            height: 100%;
        }

        @media (max-width: 740px) {

            html,
            body,
            header,
            .intro-2 {
                height: 900px;
            }
        }

        @media (min-width: 800px) and (max-width: 850px) {

            html,
            body,
            header,
            .intro-2 {
                height: 900px;
            }
        }
    </style>
</head>

<body class="creative-lp">
    <main>
        <!-- Content section -->
        <div class="container-fluid m-0" style="min-height: 100vh;">
            <div class="row">
                <div class="col-md-3" style="padding-right: 0; padding-left: 0;">
                    <div class="list-group" id="chapter-list">
                        <a href="#" class="list-group-item list-group-item-action active">Chapters</a>
                        <!-- <div class="accordion-ite">
                            <button class="collapsed list-group-item list-group-item-action chapter-link" type="button"
                                data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false"
                                aria-controls="collapseOne">
                                Chapter 1
                            </button>
                            <div id="collapseOne" class="accordion-collapse collapse p-4"
                                aria-labelledby="headingThree3" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <strong>This is the third item's accordion body.</strong> It is hidden by default,
                                    until the collapse plugin adds the appropriate classes that we use to style each
                                    element. These classes control the overall appearance, as well as the showing and
                                    hiding via CSS transitions. You can modify any of this with custom CSS or overriding
                                    our default variables. It's also worth noting that just about any HTML can go within
                                    the <code>.accordion-body</code>, though the transition does limit overflow.
                                </div>
                            </div>
                        </div>
                    -->
                    </div>
                    <a href="#" class="list-group-item list-group-item-action text-center text-primary"
                    data-toggle="modal" data-target="#exampleModalCenter">+</a>
                </div>
                <div class="col-md-9" style="padding-right: 0; padding-left: 0;">
                    <div class="card">
                        <div class="card-header">
                            Chapter 1
                        </div>
                        <div class="card-body w-100 " style="height: 91vh;">
                            <video id="video-player" controls autoplay class="w-100 h-100">
                                <!-- <source src="./static/media/mixkit-animation-of-futuristic-devices-99786.mp4"
                                    class="w-100" type="video/mp4"> -->
                            </video>

                        </div>
                    </div>

                    <div class="card" id="chapter-content">

                    </div>
                </div>
            </div>
        </div>


        <!-- Modal -->
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Add Content</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="content-form" enctype="multipart/form-data">
                        <div class="modal-body">
                            <label for="title">Title</label>
                            <input type="text" name="title" id="title" class="form-control"
                                placeholder="Title of the Video">
                            <label for="content">Content</label>
                            <input type="file" name="content" id="content" class="form-control" >
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary" >Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


    </main>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script type="text/javascript" src="./static/js/landing/jquery-3.4.0.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="./static/js/landing/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="./static/js/landing/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="./static/js/landing/mdb.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        // Define a function to make a GET request
        function fetchData(url, headers = {}) {
            return axios.get(url, { headers })
                .then(response => response.data)
                .catch(error => {
                    console.error('Error fetching data!!');
                    throw error;
                });
        }

        // Define a function to make a POST request
        function postData(url, data, headers = {}) {
            return axios.post(url, data, { headers })
                .then(response => response.data)
                .catch(error => {
                    console.error('Error posting data!!');
                    throw error;
                });
        }

        // // Define a function to make a PUT request
        // function putData(url, data, headers = {}) {
        //     return axios.put(url, data, { headers })
        //         .then(response => response.data)
        //         .catch(error => {
        //             console.error('Error updating data:', error);
        //             throw error;
        //         });
        // }

        // // Define a function to make a DELETE request
        // function deleteData(url, headers = {}) {
        //     return axios.delete(url, { headers })
        //         .then(response => response.data)
        //         .catch(error => {
        //             console.error('Error deleting data:', error);
        //             throw error;
        //         });
        // }


    </script>

    <script>
        const BASE_URL = 'http://127.0.0.1:8000';
        document.getElementById('content-form').addEventListener('submit', function (event) {
            event.preventDefault();

            // Add new content
            const newContent = {
                title: document.getElementById('title').value,
                url: document.getElementById('content').value,
            };
            postData(BASE_URL + '/api/content', newContent)
                .then(response => {
                    console.log('Content added Successfully');
                })
                .catch(error => {
                    console.error('Error adding content!!');
                });
        });

        // function handleUpdated(req, res) {
        //     const id = req.params._id;
        //     const updatedContent = {
        //         title: document.getElementById('title').value,
        //         url: document.getElementById('content').value,
        //     };
        //     putData(BASE_URL + `/api/content/${id}`, updatedContent)
        //         .then(response => {
        //             console.log('Content updated:', response);
        //         });
        // }

        // function handleDelete(req, res) {
        //     const id = req.params._id;
        //     deleteData(BASE_URL + `/api/content/${id}`)
        //         .then(response => {
        //             console.log('Content deleted:', response);
        //         });
        // }
    </script>

    <script>

        // Fetch data and render chapter buttons
        fetchData(BASE_URL + '/api/content')
            .then(data => {
                const chapterList = document.getElementById('chapter-list');

                // Loop through fetched data and generate chapter buttons
                data.forEach(chapter => {
                    const chapterButton = document.createElement('button');
                    chapterButton.className = 'collapsed list-group-item list-group-item-action chapter-link';
                    chapterButton.setAttribute('type', 'button');
                    chapterButton.setAttribute('data-bs-toggle', 'collapse');
                    chapterButton.setAttribute('data-bs-target', `#collapse${chapter._id}`);
                    chapterButton.setAttribute('aria-expanded', 'false');
                    chapterButton.textContent = chapter.title;

                    chapterButton.setAttribute('data-chapter-id', chapter._id);
                    chapterButton.addEventListener('click', function () {
                        const chapterId = this.getAttribute('data-chapter-id');
                        const videoPlayer = document.getElementById('video-player');
                        
                        // Update the video source based on the selected chapter
                        // videoPlayer.src = `./static/media/${chapterId}.mp4`; // Change the path as needed
                        videoPlayer.src = './static/media/mixkit-animation-of-futuristic-devices-99786.mp4'; // Change the path as needed
                        videoPlayer.load();
                    });

                    const chapterCollapse = document.createElement('div');
                    chapterCollapse.id = `collapse${chapter._id}`;
                    chapterCollapse.className = 'accordion-collapse collapse p-4';
                    chapterCollapse.setAttribute('aria-labelledby', `heading${chapter._id}`);
                    chapterCollapse.setAttribute('data-bs-parent', '#chapter-list');
                    chapterCollapse.innerHTML = `<div class="accordion-body">${chapter.url}</div>`;

                    chapterList.insertBefore(chapterButton, chapterList.lastChild);
                    chapterList.insertBefore(chapterCollapse, chapterList.lastChild);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });


    </script>
</body>

</html>